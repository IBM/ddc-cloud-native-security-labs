
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="IBM Developer">
      
      
        <link rel="canonical" href="https://ibm.github.io/ddc-cloud-native-security-labs/lab-03/">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.4">
    
    
      
        <title>Lab 3. Source-to-Image (S2I) - Cloud Native Security Labs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.15aa0b43.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.75751829.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,400i,700%7CIBM+Plex+Mono&display=fallback">
        <style>body,input{font-family:"IBM Plex Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"IBM Plex Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lab-03-create-a-custom-builder-image-for-source-to-image-s2i" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://ibm.github.io/ddc-cloud-native-security-labs" title="Cloud Native Security Labs" class="md-header-nav__button md-logo" aria-label="Cloud Native Security Labs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Cloud Native Security Labs
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Lab 3. Source-to-Image (S2I)
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/ibm/ddc-cloud-native-security-labs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ddc-cloud-native-security-labs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        Welcome
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../lab-00/" class="md-tabs__link md-tabs__link--active">
        Workshop
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../resources/" class="md-tabs__link">
        References
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://ibm.github.io/ddc-cloud-native-security-labs" title="Cloud Native Security Labs" class="md-nav__button md-logo" aria-label="Cloud Native Security Labs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Cloud Native Security Labs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ibm/ddc-cloud-native-security-labs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ddc-cloud-native-security-labs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" >
    
    <label class="md-nav__link" for="nav-1">
      Welcome
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Welcome" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon"></span>
        Welcome
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href=".." class="md-nav__link">
      About the workshop
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../lab-00/NEWACCOUNT/" class="md-nav__link">
      Create an IBM Cloud account
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  


  
  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Workshop
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Workshop" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Workshop
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../lab-00/" class="md-nav__link">
      Workshop Setup
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../lab-01/" class="md-nav__link">
      Lab 1. Kubernetes Networking
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../lab-02/" class="md-nav__link">
      Lab 2. Adding Secure Storage
    </a>
  </li>

        
          
          
          


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Lab 3. Source-to-Image (S2I)
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Lab 3. Source-to-Image (S2I)
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
    <nav class="md-nav" aria-label="Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-the-builder-image" class="md-nav__link">
    Build the builder image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-the-runtime-image" class="md-nav__link">
    Build the runtime image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-s2i-to-build-the-application-container" class="md-nav__link">
    Use S2I to build the application container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-to-openshift" class="md-nav__link">
    Deployment to OpenShift
  </a>
  
    <nav class="md-nav" aria-label="Deployment to OpenShift">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploying-as-a-traditional-kubernetes-deployment" class="md-nav__link">
    Deploying as a traditional Kubernetes deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-templates-buildconfigs-and-deploymentconfigs" class="md-nav__link">
    Using Templates, BuildConfigs, and DeploymentConfigs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-customizing-your-application" class="md-nav__link">
    Optional: Customizing your application
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
    
    <label class="md-nav__link" for="nav-3">
      References
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="References" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        References
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../resources/" class="md-nav__link">
      Additional resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
    <nav class="md-nav" aria-label="Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-the-builder-image" class="md-nav__link">
    Build the builder image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-the-runtime-image" class="md-nav__link">
    Build the runtime image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-s2i-to-build-the-application-container" class="md-nav__link">
    Use S2I to build the application container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-to-openshift" class="md-nav__link">
    Deployment to OpenShift
  </a>
  
    <nav class="md-nav" aria-label="Deployment to OpenShift">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploying-as-a-traditional-kubernetes-deployment" class="md-nav__link">
    Deploying as a traditional Kubernetes deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-templates-buildconfigs-and-deploymentconfigs" class="md-nav__link">
    Using Templates, BuildConfigs, and DeploymentConfigs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-customizing-your-application" class="md-nav__link">
    Optional: Customizing your application
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ibm/ddc-cloud-native-security-labs/edit/master/docs/lab-03/README.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="lab-03-create-a-custom-builder-image-for-source-to-image-s2i">Lab 03 - Create a Custom Builder Image for Source-to-Image (S2I)<a class="headerlink" href="#lab-03-create-a-custom-builder-image-for-source-to-image-s2i" title="Permanent link">&para;</a></h1>
<p>This project contains a Source-to-Image (S2I) builder image and a S2I runtime image which creates an image running Java web applications on <a href="https://openliberty.io/">Open Liberty</a>.</p>
<p><a href="https://github.com/openshift/source-to-image">Source-to-Image</a> (S2I) is an open source toolkit for building reproducible container images from source code. S2I produces ready-to-run images by injecting source code into a container image.</p>
<p>The Open Liberty builder in this lab can be used in two different environments:</p>
<ul>
<li>Local Docker runtime via 's2i',</li>
<li>Deployment to OpenShift'.</li>
</ul>
<p>With interpreted languages like python and javascript, the runtime container is also the build container. For example, with a node.js application the 'npm install' is run to build the application and then 'npm start' is run in the same container in order to start the application.</p>
<p>However, with compiled languages like Java, the build and runtime processes can be separated. This will allow for slimmer runtime containers for faster application starts and less bloat in the application image.</p>
<p>This lab will focus on the second scenario of using a builder image along with a runtime image.</p>
<p><img alt="runtime image flow" src="../assets/images/lab-03/runtime-image-flow.png" /></p>
<p>(source: <a href="https://github.com/openshift/source-to-image/blob/master/docs/runtime_image.md">https://github.com/openshift/source-to-image/blob/master/docs/runtime_image.md</a>)</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>The following prerequisites are needed:</p>
<ul>
<li><a href="https://hub.docker.com">A Docker Hub account</a></li>
<li><a href="https://github.com/">GitHub Account</a></li>
<li><a href="https://cloud.ibm.com/registration">IBM Cloud Account</a></li>
<li><a href="https://github.com/IBM/ddc-cloud-native-security-labs/blob/master/workshop/lab-00/README.md">Have followed these steps to get a cluster</a></li>
<li>You can stop after step 11</li>
</ul>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h2>
<p>For this lab we will need to use a docker-in-docker environment so that we can build our images. For this scenario we will be using the labs client of <a href="https://labs.cognitiveclass.ai/">IBM Skills Network</a>.</p>
<ol>
<li>
<p>Follow the instructions <a href="skillsNetwork/">here</a> to create your client environment.</p>
</li>
<li>
<p>Clone this repository locally and navigate to the newly cloned directory.</p>
<div class="highlight"><pre><span></span><code>git clone https://github.com/IBM/s2i-open-liberty-workshop.git -b conference
<span class="nb">cd</span> s2i-open-liberty-workshop
</code></pre></div>
</li>
<li>
<p>Then we need to install Source to Image. Run the following command to start the installation script.</p>
<div class="highlight"><pre><span></span><code>chmod +x setup.sh
./setup.sh
</code></pre></div>
</li>
<li>
<p>To make things easier, we are going to set some environment variables that we can reuse in later commands.</p>
<p><strong>Note</strong>: Replace <em>Your Username</em> with your actual docker hub username. If you do not have one, go <a href="https://hub.docker.com">here</a> to create one.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">ROOT_FOLDER</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>
<span class="nb">export</span> <span class="nv">DOCKER_USERNAME</span><span class="o">=</span>&lt;your-docker-username&gt;
</code></pre></div>
</li>
<li>
<p>Your root folder should be set to the root of the cloned repository, e.g. <code>/home/project/s2i-open-liberty-workshop</code>,</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span> <span class="nv">$ROOT_FOLDER</span>
/home/project/s2i-open-liberty-workshop
</code></pre></div>
</li>
</ol>
<h3 id="build-the-builder-image">Build the builder image<a class="headerlink" href="#build-the-builder-image" title="Permanent link">&para;</a></h3>
<p>In this section we will create the first of our two S2I images. This image will be responsible for taking in our source code and building the application binary with Maven.</p>
<ol>
<li>
<p>Navigate to the builder image directory</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> <span class="si">${</span><span class="nv">ROOT_FOLDER</span><span class="si">}</span>/builder-image
</code></pre></div>
</li>
<li>
<p>Review the ./Dockerfile</p>
<div class="highlight"><pre><span></span><code>cat Dockerfile
</code></pre></div>
<ul>
<li>The image uses a Redhat certified Universal Base Image (UBI) from the public container registry at Redhat,</li>
</ul>
<div class="highlight"><pre><span></span><code>FROM registry.access.redhat.com/ubi8/ubi:8.1
</code></pre></div>
</li>
<li>
<p>You can customize the builder image further, e.g. change the <code>LABEL</code> for <code>maintainer</code> to your name,</p>
<div class="highlight"><pre><span></span><code>LABEL <span class="nv">maintainer</span><span class="o">=</span><span class="s2">&quot;&lt;your-name&gt;&quot;</span>
</code></pre></div>
</li>
<li>
<p>Now build the builder image.</p>
<div class="highlight"><pre><span></span><code>docker build -t <span class="nv">$DOCKER_USERNAME</span>/s2i-open-liberty-builder:0.1.0 .
</code></pre></div>
<p><strong>Note</strong>: Don't miss the <code>.</code> for the current directory at the end of the <code>docker build</code> command,</p>
</li>
<li>
<p>Log in to your Dockerhub account. After running the below command, you will be asked to enter your docker password.</p>
<div class="highlight"><pre><span></span><code>docker login -u <span class="nv">$DOCKER_USERNAME</span>
</code></pre></div>
</li>
<li>
<p>Push the builder image out to Docker hub.</p>
<div class="highlight"><pre><span></span><code>docker push <span class="nv">$DOCKER_USERNAME</span>/s2i-open-liberty-builder:0.1.0
</code></pre></div>
<p>With that done, you can now build your runtime image.</p>
</li>
</ol>
<h3 id="build-the-runtime-image">Build the runtime image<a class="headerlink" href="#build-the-runtime-image" title="Permanent link">&para;</a></h3>
<p>In this section you will create the second of our two S2I images. The runtime image will be responsible for taking the compiled binary from the builder image and serving it with the Open Liberty application server.</p>
<ol>
<li>
<p>Navigate to the runtime image directory</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> <span class="nv">$ROOT_FOLDER</span>/runtime-image
</code></pre></div>
</li>
<li>
<p>Review the ./Dockerfile</p>
<div class="highlight"><pre><span></span><code>cat Dockerfile
</code></pre></div>
</li>
<li>
<p>Build the runtime image</p>
<div class="highlight"><pre><span></span><code>docker build -t <span class="nv">$DOCKER_USERNAME</span>/s2i-open-liberty:0.1.0 .
</code></pre></div>
<p><strong>Note</strong>: Don't miss the <code>.</code> for the current directory at the end of the <code>docker build</code> command,</p>
</li>
<li>
<p>Push the runtime image to Docker hub.</p>
<div class="highlight"><pre><span></span><code>docker push <span class="nv">$DOCKER_USERNAME</span>/s2i-open-liberty:0.1.0
</code></pre></div>
<p>Now we are ready to build our application with S2I.</p>
</li>
</ol>
<h3 id="use-s2i-to-build-the-application-container">Use S2I to build the application container<a class="headerlink" href="#use-s2i-to-build-the-application-container" title="Permanent link">&para;</a></h3>
<p>In this section, we will use S2I to build our application container image and then we will run the image locally using Docker.</p>
<ol>
<li>
<p>Use the builder image and runtime image to build the application image</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> <span class="nv">$ROOT_FOLDER</span>/web-app
</code></pre></div>
</li>
<li>
<p>Run a multistage S2I build, to build the application.</p>
<div class="highlight"><pre><span></span><code>~/s2i/s2i build . <span class="nv">$DOCKER_USERNAME</span>/s2i-open-liberty-builder:0.1.0 authors --runtime-image <span class="nv">$DOCKER_USERNAME</span>/s2i-open-liberty:0.1.0 -a /tmp/src/target -a /tmp/src/server.xml
</code></pre></div>
<p>Let's break down the above command:</p>
<ul>
<li>s2i build . - Use <a href="https://github.com/openshift/source-to-image/blob/master/docs/cli.md#s2i-build"><code>s2i build</code></a> in the current directory to build the Docker image by combining the builder image and sources</li>
<li>$DOCKER_USERNAME/s2i-open-liberty-builder:0.1.0 - This is the builder image used to build the application</li>
<li>authors - name of our application image</li>
<li>--runtime-image $DOCKER_USERNAME/s2i-open-liberty:0.1.0 - Take the output of the builder image and run it in this container.</li>
<li>-a /tmp/src/target -a /tmp/src/server.xml - The <code>runtime-artifact</code> flag specifies a file or directory to be copies from builder to runtime image. The runtime-artifact is where the builder output is located. These files will be passed into the runtime image.</li>
</ul>
</li>
<li>
<p>Run the newly built image to start the application on your local machine in the background,</p>
<div class="highlight"><pre><span></span><code>docker run -d --rm -p <span class="m">9080</span>:9080 authors
</code></pre></div>
</li>
<li>
<p>Check the container is running successfully,</p>
<div class="highlight"><pre><span></span><code>docker ps -a
CONTAINER ID    IMAGE    COMMAND    CREATED    STATUS    PORTS    NAMES
7ba756f5f45b    authors    <span class="s2">&quot;/opt/ol/helpers/runâ€¦&quot;</span>    <span class="m">5</span> seconds ago    Up <span class="m">4</span> seconds    <span class="m">0</span>.0.0.0:9080-&gt;9080/tcp, <span class="m">9443</span>/tcp    optimistic_elbakyan
</code></pre></div>
</li>
<li>
<p>Retrieve the authors using curl,</p>
<div class="highlight"><pre><span></span><code>curl -X GET <span class="s2">&quot;http://localhost:9080/api/v1/getauthor&quot;</span> -H <span class="s2">&quot;accept: application/json&quot;</span>
</code></pre></div>
</li>
</ol>
<h3 id="deployment-to-openshift">Deployment to OpenShift<a class="headerlink" href="#deployment-to-openshift" title="Permanent link">&para;</a></h3>
<p>In the following steps we will be using two deployment strategies:</p>
<ul>
<li>deploy as a traditional Kubernetes <code>Deployment</code>, and</li>
<li>build and deployment using templates, OpenShift <code>BuildConfig</code>, and <code>DeploymentConfig</code>.</li>
</ul>
<p>Now that we have the application running locally and have verified that it works, let's deploy it to an OpenShift environment.</p>
<ol>
<li>
<p>Log in with your OpenShift Cluster.</p>
<ol>
<li>In preparation of this lab, you claimed a cluster that was created for you, and which is now available via your IBM Cloud dashboard,</li>
<li>Browse to your assigned OpenShift cluster Overview page,</li>
<li>
<p>From the top right, open your <code>OpenShift web console</code></p>
<p><img alt="Open OpenShift Web Console" src="../assets/images/lab-03/open-openshift-console.png" /></p>
</li>
<li>
<p>In the OpenShift Web Console, from the profile dropdown click  <code>Copy Login Command</code>.</p>
<p><img alt="Copy Login Command" src="../assets/images/lab-03/copy-login-command.png" /></p>
</li>
<li>
<p>Paste the login command to login, e.g.</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code>oc login --token<span class="o">=</span>&lt;login-token&gt; --server<span class="o">=</span>https://&lt;cluster-subdomain&gt;:&lt;service-port&gt;
</code></pre></div>
</li>
</ol>
<h4 id="deploying-as-a-traditional-kubernetes-deployment">Deploying as a traditional Kubernetes deployment<a class="headerlink" href="#deploying-as-a-traditional-kubernetes-deployment" title="Permanent link">&para;</a></h4>
<p>For this method, we will deploy our application by creating a kubernetes deployment along with a service and a route.</p>
<ol>
<li>
<p>Tag the image that was created in the previous section.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">IMAGE</span><span class="o">=</span>docker.io/<span class="nv">$DOCKER_USERNAME</span>/authors:latest
<span class="nb">echo</span> <span class="nv">$IMAGE</span>
docker tag authors <span class="nv">$IMAGE</span>
</code></pre></div>
</li>
<li>
<p>Push the image that we built locally using s2i to the OpenShift image registry.</p>
<div class="highlight"><pre><span></span><code>docker push <span class="nv">$IMAGE</span>
</code></pre></div>
</li>
<li>
<p>Go back to the root folder,</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> <span class="nv">$ROOT_FOLDER</span>
</code></pre></div>
</li>
<li>
<p>Review the <code>application.yaml</code> file,</p>
<div class="highlight"><pre><span></span><code>cat application.yaml
</code></pre></div>
<p>This command will add your newly pushed authors image to the deployment yaml file.</p>
<div class="highlight"><pre><span></span><code>sed -i <span class="s2">&quot;s|APPLICATION_IMAGE|</span><span class="nv">$IMAGE</span><span class="s2">|&quot;</span> application.yaml
</code></pre></div>
</li>
<li>
<p>Apply the <code>application.yaml</code> file using the <code>oc</code> cli to create our Deployment, Service, and Route.</p>
<div class="highlight"><pre><span></span><code>oc apply -f application.yaml
</code></pre></div>
</li>
<li>
<p>Now let's visit the deployed application. Run the following to get the route to access the application.</p>
<div class="highlight"><pre><span></span><code>oc get routes -l <span class="nv">app</span><span class="o">=</span>authors -o go-template<span class="o">=</span><span class="s1">&#39;{{range .items}}{{.spec.host}}{{end}}&#39;</span>
</code></pre></div>
</li>
<li>
<p>Copy and paste the output of the previous command to set a variable $APP_URL,</p>
<div class="highlight"><pre><span></span><code><span class="nv">APP_URL</span><span class="o">=</span>&lt;get-routes-output&gt;
</code></pre></div>
</li>
<li>
<p>Test the application using curl</p>
<div class="highlight"><pre><span></span><code>curl -X GET <span class="s2">&quot;http://</span><span class="nv">$APP_URL</span><span class="s2">/api/v1/getauthor&quot;</span> -H <span class="s2">&quot;accept: application/json&quot;</span>
</code></pre></div>
</li>
<li>
<p>Or use the route to your app and paste it into your web browser and add the following to the end of the route:</p>
<div class="highlight"><pre><span></span><code>/openapi/ui
</code></pre></div>
<p>So your route should appear like the following but without the (...):</p>
<div class="highlight"><pre><span></span><code>authors-route-default...appdomain.cloud/openapi/ui
</code></pre></div>
<p><img alt="Authors OpenAPI UI" src="../assets/images/lab-03/authors-openapi-ui.png" /></p>
</li>
</ol>
<p>It sometimes takes a minute to fully deploy so if you get a message about the application not being available, try again.</p>
<h4 id="using-templates-buildconfigs-and-deploymentconfigs">Using Templates, BuildConfigs, and DeploymentConfigs<a class="headerlink" href="#using-templates-buildconfigs-and-deploymentconfigs" title="Permanent link">&para;</a></h4>
<p>For this section, you will explore how to build and deploy our application using OpenShift concepts known as templates, build configs and deployment configs. With build configs, the s2i builds are actually happening on the cluster rather than locally.</p>
<ol>
<li>Create a push secret to push the application image to your DockerHub account.</li>
</ol>
<p><strong>You must</strong> modify the following command by replacing <strong>\&lt;Docker Password></strong> with your DockerHub password and <strong>\&lt;Docker Email></strong> with your email address for DockerHub.</p>
<div class="highlight"><pre><span></span><code>```bash
kubectl create secret docker-registry regcred --docker-server=https://index.docker.io/v1/ --docker-username=$DOCKER_USERNAME --docker-password=&lt;Docker Password&gt; --docker-email=&lt;Docker Email&gt;
```

With the secret created we can now give the *builder* service account access to the secret so that it can push the newly created application image to your account.

```bash
kubectl patch sa builder --type=&#39;json&#39; -p=&#39;[{&quot;op&quot;:&quot;add&quot;,&quot;path&quot;:&quot;/secrets/-&quot;,&quot;value&quot;:{&quot;name&quot;:&quot;regcred&quot;}}]&#39;
```
</code></pre></div>
<ol>
<li>
<p>Then, we need to create a builder template that contains our builder image build config. See <a href="https://docs.openshift.com/container-platform/4.3/openshift_images/using-templates.html">Using Templates</a>.</p>
</li>
<li>
<p>Review the <code>buildTemplate.yaml</code> file, which contains the BuildConfig object for the builder image,</p>
<div class="highlight"><pre><span></span><code>cat buildTemplate.yaml
</code></pre></div>
</li>
<li>
<p>Next, let's create the build config and start the first build:</p>
<div class="highlight"><pre><span></span><code>oc process -f buildTemplate.yaml -p <span class="nv">DOCKER_USERNAME</span><span class="o">=</span><span class="nv">$DOCKER_USERNAME</span> <span class="p">|</span> oc apply -f -
</code></pre></div>
<p>This command will not only create our build config but also kick off the first build to create our builder image and push it to DockerHub.</p>
<p>To view the status of the build you can run:</p>
<div class="highlight"><pre><span></span><code>oc describe build open-liberty-builder
</code></pre></div>
<p>Or view the Build section of the OpenShift console.</p>
</li>
<li>
<p>Now let's take a look at our runtime image build config:</p>
<div class="highlight"><pre><span></span><code>cat runtimeTemplate.yaml
</code></pre></div>
<p>Then, create the build config for our runtime image and start the first build:</p>
<div class="highlight"><pre><span></span><code>oc process -f runtimeTemplate.yaml -p <span class="nv">DOCKER_USERNAME</span><span class="o">=</span><span class="nv">$DOCKER_USERNAME</span> <span class="p">|</span> oc apply -f -
</code></pre></div>
<p>To take a look at the build status, run:</p>
<div class="highlight"><pre><span></span><code>oc describe build open-liberty-app
</code></pre></div>
<p>Or view the Build section of the OpenShift console.</p>
</li>
</ol>
<p>Now with our builds run, we can deploy our application. Previously we used a kubernetes deployment object to do this however this time we will use an OpenShift deployment configuration.</p>
<p>Both objects are similar and will accomplish the same goals however with deployment configs you have greater control of your application's deployment behavior. You also have the option to set automated triggers to kick off builds and deploys based on image, configuration, or git repository changes. Due to a limitation in our workshop environment, we will not be exploring triggers and utilizing image streams with the integrated OpenShift registry.</p>
<ol>
<li>
<p>Let's check out the deployment config template:</p>
<div class="highlight"><pre><span></span><code>cat deploymentConfig.yaml
</code></pre></div>
</li>
<li>
<p>Then, create the deploymentConfig</p>
<div class="highlight"><pre><span></span><code>oc apply -f deploymentConfig.yaml
</code></pre></div>
<div class="highlight"><pre><span></span><code>oc new-app --template authors-app -p <span class="nv">DOCKER_USERNAME</span><span class="o">=</span><span class="nv">$DOCKER_USERNAME</span>
</code></pre></div>
</li>
<li>
<p>To verify that your app is deployed, run:</p>
<div class="highlight"><pre><span></span><code>oc get pods
</code></pre></div>
<p>You should see a pod named <code>authors2-1-</code> followed by 5 random characters, in the example below they are <code>x58fk</code>. This is the application pod.</p>
<div class="highlight"><pre><span></span><code>oc get pods
NAME                                  READY   STATUS      RESTARTS   AGE
authors-deployment-69ff497df6-vz75c   <span class="m">1</span>/1     Running     <span class="m">0</span>          22h
authors2-1-deploy                     <span class="m">0</span>/1     Completed   <span class="m">0</span>          63s
authors2-1-x58fk                      <span class="m">1</span>/1     Running     <span class="m">0</span>          60s
open-liberty-app-1-build              <span class="m">0</span>/1     Completed   <span class="m">0</span>          179m
open-liberty-builder-1-build          <span class="m">0</span>/1     Completed   <span class="m">0</span>          3h5m
</code></pre></div>
<p>You can also view these on the OpenShift dashboard if you navigate to <code>Workloads</code> &gt; <code>Pods</code> and look for your new pod. Make sure you are in your personal project and not in <code>default</code>. The pod name should start with <code>authors2-</code>.</p>
</li>
<li>
<p>Once you have verified that the new pod is running, enter the following command to view the application routes.</p>
<div class="highlight"><pre><span></span><code>oc get routes
</code></pre></div>
<div class="highlight"><pre><span></span><code>oc get routes

NAME    HOST/PORT    PATH    SERVICES    PORT    TERMINATION    WILDCARD
authors-route    authors-route-default.your-roks-43-1n-cl-2bef1f4b4097001da9502000c44fc2b2-0000.us-south.containers.appdomain.cloud    authors-service    http    None
authors2    authors2-default.your-roks-43-1n-cl-2bef1f4b4097001da9502000c44fc2b2-0000.us-south.containers.appdomain.cloud    authors2    <span class="m">9080</span>    None
</code></pre></div>
</li>
<li>
<p>Copy the route named <code>authors2</code> and add it to the end of the command below.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">API_URL</span><span class="o">=</span>
</code></pre></div>
<p>View the sample below, however, you will have a different route.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">API_URL</span><span class="o">=</span>authors2-default.osgdcw01-0e3e0ef4c9c6d831e8aa6fe01f33bfc4-0000.sjc04.containers.appdomain.cloud
</code></pre></div>
<p>Then test your application with the command below:</p>
<div class="highlight"><pre><span></span><code>curl -X GET <span class="s2">&quot;http://</span><span class="nv">$API_URL</span><span class="s2">/api/v1/getauthor&quot;</span> -H <span class="s2">&quot;accept: application/json&quot;</span>
</code></pre></div>
<p>You should then get a response back from the application that we just deployed:</p>
<div class="highlight"><pre><span></span><code>curl -X GET <span class="s2">&quot;http://</span><span class="nv">$API_URL</span><span class="s2">/api/v1/getauthor&quot;</span> -H <span class="s2">&quot;accept: application/json&quot;</span>
<span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Oliver Rodriguez&quot;</span>,<span class="s2">&quot;twitter&quot;</span>:<span class="s2">&quot;https://twitter.com/heres__ollie&quot;</span>,<span class="s2">&quot;blog&quot;</span>:<span class="s2">&quot;https://developer.ibm.com&quot;</span>
</code></pre></div>
</li>
</ol>
<h3 id="optional-customizing-your-application">Optional: Customizing your application<a class="headerlink" href="#optional-customizing-your-application" title="Permanent link">&para;</a></h3>
<p>In this optional section we will create our own copy of the code push the changes to OpenShift.</p>
<ol>
<li>
<p>First we need to create your own version of the code repo by creating a fork. This will copy the repo into your GitHub account. Navigate to the lab repo at <a href="https://github.com/IBM/s2i-open-liberty-workshop">https://github.com/IBM/s2i-open-liberty-workshop</a> and click on the <strong>Fork</strong> button in the upper right of the page.</p>
</li>
<li>
<p>When the repo is done forking, click on the green <strong>Clone or download</strong> button and copy your git repo url.</p>
<p>To make it easier, create an environment variable to hold your repo url. Copy the following command and replace <code>&lt;repo url&gt;</code> with your actual repo url:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">REPOSITORY_URL</span><span class="o">=</span>&lt;repo url&gt;
</code></pre></div>
<ol>
<li>Then, in your terminal, navigate to the <code>$HOME</code> directory to clone your repo locally and run the following commands:</li>
</ol>
<div class="highlight"><pre><span></span><code>mkdir <span class="nv">$HOME</span>/tmp
<span class="nb">cd</span> <span class="nv">$HOME</span>/tmp
git clone <span class="nv">$REPOSITORY_URL</span>
<span class="nb">cd</span> s2i-open-liberty-workshop
</code></pre></div>
</li>
<li>
<p>Now that we have our own copy, let's push a change and test it out. From your browser, navigate to the GitHub repo that you forked. Click on the <strong>Branch</strong> dropdown and select <strong>conference</strong>.</p>
</li>
<li>
<p>Then navigate to the file at <code>web-app/src/main/java/com/ibm/authors/GetAuthor.java</code></p>
</li>
<li>
<p>Click on the pencil icon in the upper right of the code to enter editing mode.</p>
</li>
<li>
<p>On lines 56-59 edit the name, twitter, and blog to your own information or fake information if you'd like.</p>
<div class="highlight"><pre><span></span><code><span class="n">Author</span> <span class="n">author</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Author</span><span class="p">();</span>
    <span class="n">author</span><span class="p">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">&quot;Oliver Rodriguez&quot;</span><span class="p">;</span>
    <span class="n">author</span><span class="p">.</span><span class="na">twitter</span> <span class="o">=</span> <span class="s">&quot;https://twitter.com/heres__ollie&quot;</span><span class="p">;</span>
    <span class="n">author</span><span class="p">.</span><span class="na">blog</span> <span class="o">=</span> <span class="s">&quot;http://developer.ibm.com&quot;</span><span class="p">;</span>
</code></pre></div>
</li>
<li>
<p>Scroll down and click on <code>Commit changes</code>.</p>
</li>
<li>
<p>With the changes pushed, we can now rebuild and redeploy the application. Follow the following steps:</p>
<p>Build the builder image:</p>
<div class="highlight"><pre><span></span><code>oc process -f buildTemplate.yaml -p <span class="nv">DOCKER_USERNAME</span><span class="o">=</span><span class="nv">$DOCKER_USERNAME</span> -p <span class="nv">SOURCE_REPOSITORY_URL</span><span class="o">=</span><span class="nv">$REPOSITORY_URL</span> -p <span class="nv">APP_NAME</span><span class="o">=</span>authors-3 <span class="p">|</span> oc apply -f -
</code></pre></div>
<div class="highlight"><pre><span></span><code>oc start-build open-liberty-builder
</code></pre></div>
<p>Ensure that the previous build is finished, then start the runtime build:</p>
<div class="highlight"><pre><span></span><code>oc start-build open-liberty-app
</code></pre></div>
<p>Ensure that the runtime image build is finished, then deploy the app with the following command:</p>
<div class="highlight"><pre><span></span><code>oc new-app --template authors-app -p <span class="nv">DOCKER_USERNAME</span><span class="o">=</span><span class="nv">$DOCKER_USERNAME</span> -p <span class="nv">APP_NAME</span><span class="o">=</span>authors-3
</code></pre></div>
</li>
<li>
<p>Once you have verified that the application is deployed and the new pod is running, enter the following command to view the application routes.</p>
<div class="highlight"><pre><span></span><code>oc get routes

NAME    HOST/PORT    PATH    SERVICES    PORT    TERMINATION    WILDCARD
authors-route    authors-route-default.your-roks-43-1n-cl-2bef1f4b4097001da9502000c44fc2b2-0000.us-south.containers.appdomain.cloud    authors-service    http    None
authors2    authors2-default.your-roks-43-1n-cl-2bef1f4b4097001da9502000c44fc2b2-0000.us-south.containers.appdomain.cloud    authors2    <span class="m">9080</span>    None
</code></pre></div>
</li>
<li>
<p>Copy the route named <code>authors-3</code> and add it to the end of the command below.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">API_URL</span><span class="o">=</span>
</code></pre></div>
<p>View the sample below, however, you will have a different route.</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">API_URL</span><span class="o">=</span>authors2-default.osgdcw01-0e3e0ef4c9c6d831e8aa6fe01f33bfc4-0000.sjc04.containers.appdomain.cloud
</code></pre></div>
<p>Then test your application with the command below:</p>
<div class="highlight"><pre><span></span><code>curl -X GET <span class="s2">&quot;http://</span><span class="nv">$API_URL</span><span class="s2">/api/v1/getauthor&quot;</span> -H <span class="s2">&quot;accept: application/json&quot;</span>
</code></pre></div>
</li>
</ol>
<p>You should then see the info that you edited in the file earlier.</p>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h2>
<p>In this lab we have explored building our own custom s2i images for building containerized application from source code. We utilized a multi stage s2i process that separated the build environment from the runtime environment which allowed for us to have a slimmer application image. Then, we deployed the application as a traditional Kubernetes deployment. Lastly, we explored how to build and deploy the application using templates, OpenShift build configs, and deployment configs.</p>
<ol>
<li>Go back to the <a href="../SUMMARY/">Summary</a>.</li>
</ol>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../lab-02/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Lab 2. Adding Secure Storage
              </div>
            </div>
          </a>
        
        
          <a href="../resources/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Additional resources
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 IBM Developer
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/ibm" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/ibmdeveloper" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.linkedin.com/company/ibm/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.youtube.com/user/developerworks" target="_blank" rel="noopener" title="www.youtube.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://dev.to/ibmdeveloper" target="_blank" rel="noopener" title="dev.to" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.93c04032.min.js"></script>
      <script src="../assets/javascripts/bundle.83e5331e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ['navigation.tabs'],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>